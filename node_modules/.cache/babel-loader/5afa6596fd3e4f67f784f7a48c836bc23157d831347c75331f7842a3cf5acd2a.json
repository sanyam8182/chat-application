{"ast":null,"code":"import axios from \"axios\";\nimport jwtDecode from \"jwt-decode\";\nconst API_URL = \"http://localhost:3000/auth\";\nconst register = async (firstName, lastName, username, email, password) => {\n  const data = {\n    firstname: firstName,\n    lastname: lastName,\n    username: username,\n    email: email,\n    password: password\n  };\n  try {\n    await axios.post(`${API_URL}/register`, data);\n    await login(username, password);\n    console.log(document.cookie);\n  } catch (error) {\n    throw error;\n  }\n};\nconst login = async (username, password) => {\n  try {\n    const data = {\n      username: username,\n      password: password\n    };\n    const response = await axios.post(`${API_URL}/login`, data);\n    const decodedToken = jwtDecode(response.data.token);\n    const expirationTime = new Date(decodedToken.exp * 1000);\n    document.cookie = `jwt=${response.data.token}; path=/; expires=${expirationTime}; secure; SameSite=strict`;\n    return response.data.token;\n  } catch (error) {\n    throw error;\n  }\n};\nexport { register, login };","map":{"version":3,"names":["axios","jwtDecode","API_URL","register","firstName","lastName","username","email","password","data","firstname","lastname","post","login","console","log","document","cookie","error","response","decodedToken","token","expirationTime","Date","exp"],"sources":["/Users/sanyamkoul/Documents/Web_App/chat-application/src/services/authService.js"],"sourcesContent":["import axios from \"axios\";\nimport jwtDecode from \"jwt-decode\";\n\nconst API_URL = \"http://localhost:3000/auth\";\n\nconst register = async (firstName, lastName, username, email, password) => {\n  const data = {\n    firstname: firstName,\n    lastname: lastName,\n    username: username,\n    email: email,\n    password: password,\n  };\n\n  try {\n    await axios.post(`${API_URL}/register`, data);\n    await login(username, password);\n    console.log(document.cookie);\n  } catch (error) {\n    throw error;\n  }\n};\n\nconst login = async (username, password) => {\n  try {\n    const data = {\n      username: username,\n      password: password,\n    };\n    const response = await axios.post(`${API_URL}/login`, data);\n    const decodedToken = jwtDecode(response.data.token);\n    const expirationTime = new Date(decodedToken.exp * 1000);\n    document.cookie = `jwt=${response.data.token}; path=/; expires=${expirationTime}; secure; SameSite=strict`;\n    return response.data.token;\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport { register, login };\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,SAAS,MAAM,YAAY;AAElC,MAAMC,OAAO,GAAG,4BAA4B;AAE5C,MAAMC,QAAQ,GAAG,MAAAA,CAAOC,SAAS,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,QAAQ,KAAK;EACzE,MAAMC,IAAI,GAAG;IACXC,SAAS,EAAEN,SAAS;IACpBO,QAAQ,EAAEN,QAAQ;IAClBC,QAAQ,EAAEA,QAAQ;IAClBC,KAAK,EAAEA,KAAK;IACZC,QAAQ,EAAEA;EACZ,CAAC;EAED,IAAI;IACF,MAAMR,KAAK,CAACY,IAAI,CAAE,GAAEV,OAAQ,WAAU,EAAEO,IAAI,CAAC;IAC7C,MAAMI,KAAK,CAACP,QAAQ,EAAEE,QAAQ,CAAC;IAC/BM,OAAO,CAACC,GAAG,CAACC,QAAQ,CAACC,MAAM,CAAC;EAC9B,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd,MAAMA,KAAK;EACb;AACF,CAAC;AAED,MAAML,KAAK,GAAG,MAAAA,CAAOP,QAAQ,EAAEE,QAAQ,KAAK;EAC1C,IAAI;IACF,MAAMC,IAAI,GAAG;MACXH,QAAQ,EAAEA,QAAQ;MAClBE,QAAQ,EAAEA;IACZ,CAAC;IACD,MAAMW,QAAQ,GAAG,MAAMnB,KAAK,CAACY,IAAI,CAAE,GAAEV,OAAQ,QAAO,EAAEO,IAAI,CAAC;IAC3D,MAAMW,YAAY,GAAGnB,SAAS,CAACkB,QAAQ,CAACV,IAAI,CAACY,KAAK,CAAC;IACnD,MAAMC,cAAc,GAAG,IAAIC,IAAI,CAACH,YAAY,CAACI,GAAG,GAAG,IAAI,CAAC;IACxDR,QAAQ,CAACC,MAAM,GAAI,OAAME,QAAQ,CAACV,IAAI,CAACY,KAAM,qBAAoBC,cAAe,2BAA0B;IAC1G,OAAOH,QAAQ,CAACV,IAAI,CAACY,KAAK;EAC5B,CAAC,CAAC,OAAOH,KAAK,EAAE;IACd,MAAMA,KAAK;EACb;AACF,CAAC;AAED,SAASf,QAAQ,EAAEU,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}