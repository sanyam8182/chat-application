{"ast":null,"code":"import axios from \"axios\";\nimport jwtDecode from \"jwt-decode\";\nconst API_URL = \"http://localhost:3000/auth\";\nconst register = async (firstName, lastName, username, email, password) => {\n  const data = {\n    firstname: firstName,\n    lastname: lastName,\n    username: username,\n    email: email,\n    password: password\n  };\n  try {\n    await axios.post(`${API_URL}/register`, data);\n    const token = login(username, password);\n    console.log(document.cookie);\n  } catch (error) {\n    throw error;\n  }\n};\nconst login = async (username, password) => {\n  try {\n    const data = {\n      username: username,\n      password: password\n    };\n    const response = await axios.post(`${API_URL}/login`, data);\n    const decodedToken = jwtDecode(response.data.token);\n    const expirationTime = new Date(decodedToken.exp * 1000);\n    document.cookie = `jwt=${token}; path=/; expires=${expirationTime}; secure; SameSite=strict`;\n    return response.data.token;\n  } catch (error) {\n    throw error;\n  }\n};\nexport { register, login };","map":{"version":3,"names":["axios","jwtDecode","API_URL","register","firstName","lastName","username","email","password","data","firstname","lastname","post","token","login","console","log","document","cookie","error","response","decodedToken","expirationTime","Date","exp"],"sources":["/Users/sanyamkoul/Documents/Web_App/chat-application/src/services/authService.js"],"sourcesContent":["import axios from \"axios\";\nimport jwtDecode from \"jwt-decode\";\n\nconst API_URL = \"http://localhost:3000/auth\";\n\nconst register = async (firstName, lastName, username, email, password) => {\n  const data = {\n    firstname: firstName,\n    lastname: lastName,\n    username: username,\n    email: email,\n    password: password,\n  };\n\n  try {\n    await axios.post(`${API_URL}/register`, data);\n    const token = login(username, password);\n    console.log(document.cookie);\n  } catch (error) {\n    throw error;\n  }\n};\n\nconst login = async (username, password) => {\n  try {\n    const data = {\n      username: username,\n      password: password,\n    };\n    const response = await axios.post(`${API_URL}/login`, data);\n    const decodedToken = jwtDecode(response.data.token);\n    const expirationTime = new Date(decodedToken.exp * 1000);\n    document.cookie = `jwt=${token}; path=/; expires=${expirationTime}; secure; SameSite=strict`;\n    return response.data.token;\n  } catch (error) {\n    throw error;\n  }\n};\n\nexport { register, login };\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,SAAS,MAAM,YAAY;AAElC,MAAMC,OAAO,GAAG,4BAA4B;AAE5C,MAAMC,QAAQ,GAAG,MAAAA,CAAOC,SAAS,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,QAAQ,KAAK;EACzE,MAAMC,IAAI,GAAG;IACXC,SAAS,EAAEN,SAAS;IACpBO,QAAQ,EAAEN,QAAQ;IAClBC,QAAQ,EAAEA,QAAQ;IAClBC,KAAK,EAAEA,KAAK;IACZC,QAAQ,EAAEA;EACZ,CAAC;EAED,IAAI;IACF,MAAMR,KAAK,CAACY,IAAI,CAAE,GAAEV,OAAQ,WAAU,EAAEO,IAAI,CAAC;IAC7C,MAAMI,KAAK,GAAGC,KAAK,CAACR,QAAQ,EAAEE,QAAQ,CAAC;IACvCO,OAAO,CAACC,GAAG,CAACC,QAAQ,CAACC,MAAM,CAAC;EAC9B,CAAC,CAAC,OAAOC,KAAK,EAAE;IACd,MAAMA,KAAK;EACb;AACF,CAAC;AAED,MAAML,KAAK,GAAG,MAAAA,CAAOR,QAAQ,EAAEE,QAAQ,KAAK;EAC1C,IAAI;IACF,MAAMC,IAAI,GAAG;MACXH,QAAQ,EAAEA,QAAQ;MAClBE,QAAQ,EAAEA;IACZ,CAAC;IACD,MAAMY,QAAQ,GAAG,MAAMpB,KAAK,CAACY,IAAI,CAAE,GAAEV,OAAQ,QAAO,EAAEO,IAAI,CAAC;IAC3D,MAAMY,YAAY,GAAGpB,SAAS,CAACmB,QAAQ,CAACX,IAAI,CAACI,KAAK,CAAC;IACnD,MAAMS,cAAc,GAAG,IAAIC,IAAI,CAACF,YAAY,CAACG,GAAG,GAAG,IAAI,CAAC;IACxDP,QAAQ,CAACC,MAAM,GAAI,OAAML,KAAM,qBAAoBS,cAAe,2BAA0B;IAC5F,OAAOF,QAAQ,CAACX,IAAI,CAACI,KAAK;EAC5B,CAAC,CAAC,OAAOM,KAAK,EAAE;IACd,MAAMA,KAAK;EACb;AACF,CAAC;AAED,SAAShB,QAAQ,EAAEW,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}